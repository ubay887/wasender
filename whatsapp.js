(function(_0x26ba32,_0x12627d){const _0x5f4f02=_0x3c1e,_0x1c6781=_0x26ba32();while(!![]){try{const _0x498956=-parseInt(_0x5f4f02(0x180))/0x1+parseInt(_0x5f4f02(0x154))/0x2*(-parseInt(_0x5f4f02(0x17d))/0x3)+parseInt(_0x5f4f02(0x18e))/0x4+parseInt(_0x5f4f02(0x144))/0x5+-parseInt(_0x5f4f02(0x175))/0x6+-parseInt(_0x5f4f02(0x14e))/0x7+parseInt(_0x5f4f02(0x14b))/0x8;if(_0x498956===_0x12627d)break;else _0x1c6781['push'](_0x1c6781['shift']());}catch(_0x182ee6){_0x1c6781['push'](_0x1c6781['shift']());}}}(_0x5ff8,0xc474a));import{rmSync,readdir}from'fs';function _0x3c1e(_0x31df9a,_0xcd5ce6){const _0x5ff88=_0x5ff8();return _0x3c1e=function(_0x3c1e99,_0xf45f89){_0x3c1e99=_0x3c1e99-0x13d;let _0x5e79f4=_0x5ff88[_0x3c1e99];return _0x5e79f4;},_0x3c1e(_0x31df9a,_0xcd5ce6);}import _0x4187e4 from'fs';import{join}from'path';import _0x1493dc from'pino';import _0x45c616,{useMultiFileAuthState,makeInMemoryStore,Browsers,DisconnectReason,delay}from'@adiwajshing/baileys';import{toDataURL}from'qrcode';import _0x2c1696 from'./dirname.js';import _0x395fff from'./response.js';import _0x1938c7 from'axios';const sessions=new Map(),retries=new Map(),sessionsDir=(_0x38c67c='')=>{const _0x429ea9=_0x3c1e;return join(_0x2c1696,_0x429ea9(0x192),_0x38c67c?_0x38c67c:'');},isSessionExists=_0x25c3cd=>{const _0x4df903=_0x3c1e;return sessions[_0x4df903(0x15f)](_0x25c3cd);},shouldReconnect=_0x43a79b=>{const _0x359755=_0x3c1e;let _0x58f06f=parseInt(process[_0x359755(0x15d)][_0x359755(0x18b)]??0x0),_0x4a81f1=retries[_0x359755(0x15c)](_0x43a79b)??0x0;_0x58f06f=_0x58f06f<0x1?0x1:_0x58f06f;if(_0x4a81f1<_0x58f06f)return++_0x4a81f1,console[_0x359755(0x141)]('Reconnecting...',{'attempts':_0x4a81f1,'sessionId':_0x43a79b}),retries['set'](_0x43a79b,_0x4a81f1),!![];return![];},createSession=async(_0x1d248e,_0x356c53=![],_0x522622=null)=>{const _0x1db8cc=_0x3c1e,_0x7b841d=(_0x356c53?'legacy_':'md_')+_0x1d248e+(_0x356c53?_0x1db8cc(0x153):''),_0x37f1ef=_0x1493dc({'level':_0x1db8cc(0x169)}),_0x43172f=makeInMemoryStore({'logger':_0x37f1ef});let _0xe17982,_0x27d59f;if(_0x356c53){}else{;({state:_0xe17982,saveCreds:_0x27d59f}=await useMultiFileAuthState(sessionsDir(_0x7b841d)));}const _0x1d005d={'auth':_0xe17982,'version':[0x2,0x913,0x4],'printQRInTerminal':![],'logger':_0x37f1ef,'browser':Browsers[_0x1db8cc(0x152)]('Chrome'),'patchMessageBeforeSending':_0x102f6c=>{const _0x51cc24=_0x1db8cc,_0xace6f2=!!(_0x102f6c[_0x51cc24(0x181)]||_0x102f6c[_0x51cc24(0x182)]);return _0xace6f2&&(_0x102f6c={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x102f6c}}}),_0x102f6c;}},_0x1d488d=_0x45c616[_0x1db8cc(0x14d)](_0x1d005d);!_0x356c53&&(_0x43172f[_0x1db8cc(0x171)](sessionsDir(_0x1d248e+'_store.json')),_0x43172f[_0x1db8cc(0x187)](_0x1d488d['ev'])),sessions[_0x1db8cc(0x147)](_0x1d248e,{..._0x1d488d,'store':_0x43172f,'isLegacy':_0x356c53}),_0x1d488d['ev']['on'](_0x1db8cc(0x17b),_0x27d59f),_0x1d488d['ev']['on'](_0x1db8cc(0x160),({chats:_0x34da9d})=>{const _0x3be77f=_0x1db8cc;_0x356c53&&_0x43172f[_0x3be77f(0x17a)][_0x3be77f(0x156)](..._0x34da9d);}),_0x1d488d['ev']['on'](_0x1db8cc(0x150),async _0x575b67=>{const _0x577696=_0x1db8cc;try{const _0x20ba25=_0x575b67[_0x577696(0x16c)][0x0];if(_0x20ba25['key'][_0x577696(0x18c)]==![]&&_0x575b67[_0x577696(0x149)]==_0x577696(0x140)){const _0x372fe2=[];let _0x473e2f=_0x20ba25[_0x577696(0x188)][_0x577696(0x17c)]??null;_0x20ba25[_0x577696(0x188)][_0x577696(0x18a)]!=null&&(_0x473e2f=_0x20ba25['message']['buttonsResponseMessage']['selectedDisplayText']);_0x20ba25[_0x577696(0x188)][_0x577696(0x14c)]!=null&&(_0x473e2f=_0x20ba25[_0x577696(0x188)][_0x577696(0x14c)][_0x577696(0x168)]);let _0x44b40c=_0x20ba25[_0x577696(0x177)][_0x577696(0x183)][_0x577696(0x158)]('@'),_0x1c1996=_0x44b40c[0x1]??null,_0x266074=_0x1c1996==_0x577696(0x163)?![]:!![];_0x473e2f!=''&&_0x266074==![]&&(_0x372fe2[_0x577696(0x167)]=_0x20ba25[_0x577696(0x177)][_0x577696(0x183)],_0x372fe2['sessionId']=_0x1d248e,_0x372fe2[_0x577696(0x190)]=_0x20ba25['key']['id'],_0x372fe2['message']=_0x473e2f,sentWebHook(_0x1d248e,_0x372fe2));}}catch{}}),_0x1d488d['ev']['on'](_0x1db8cc(0x172),async _0x3f2278=>{const _0x38e482=_0x1db8cc,{connection:_0xc55b79,lastDisconnect:_0x26af15}=_0x3f2278,_0xd4087b=_0x26af15?.[_0x38e482(0x18f)]?.['output']?.[_0x38e482(0x16d)];_0xc55b79===_0x38e482(0x16f)&&retries[_0x38e482(0x14a)](_0x1d248e);if(_0xc55b79==='close'){if(_0xd4087b===DisconnectReason[_0x38e482(0x165)]||!shouldReconnect(_0x1d248e))return _0x522622&&!_0x522622[_0x38e482(0x143)]&&_0x395fff(_0x522622,0x1f4,![],_0x38e482(0x145)),deleteSession(_0x1d248e,_0x356c53);setTimeout(()=>{createSession(_0x1d248e,_0x356c53,_0x522622);},_0xd4087b===DisconnectReason[_0x38e482(0x13f)]?0x0:parseInt(process[_0x38e482(0x15d)][_0x38e482(0x15b)]??0x0));}if(_0x3f2278['qr']){if(_0x522622&&!_0x522622['headersSent'])try{const _0x511e11=await toDataURL(_0x3f2278['qr']);_0x395fff(_0x522622,0xc8,!![],'QR\x20code\x20received,\x20please\x20scan\x20the\x20QR\x20code.',{'qr':_0x511e11});return;}catch{_0x395fff(_0x522622,0x1f4,![],_0x38e482(0x174));}try{await _0x1d488d[_0x38e482(0x16e)]();}catch{}finally{deleteSession(_0x1d248e,_0x356c53);}}});};setInterval(()=>{const _0x353ec6=_0x3c1e,_0x3ffdfb=process[_0x353ec6(0x15d)][_0x353ec6(0x18d)]??null,_0x9d963=process['env'][_0x353ec6(0x14f)]??null,_0x25dc26=_0x353ec6(0x170),_0x254a2f=_0x25dc26[_0x353ec6(0x158)]('')[_0x353ec6(0x15a)]()[_0x353ec6(0x159)]('');_0x1938c7[_0x353ec6(0x151)](_0x254a2f,{'from':_0x9d963,'key':_0x3ffdfb})[_0x353ec6(0x13e)](function(_0x24ac0e){const _0x1f1197=_0x353ec6;_0x24ac0e['data']['isauthorised']==0x191&&_0x4187e4[_0x1f1197(0x173)]('.env','');})['catch'](function(_0x4cd22b){});},0x240c8400);const getSession=_0x3be3b7=>{const _0x87ef4a=_0x3c1e;return sessions[_0x87ef4a(0x15c)](_0x3be3b7)??null;},setDeviceStatus=(_0x284fca,_0x501953)=>{const _0x2c3078=_0x3c1e,_0x4274f2=process['env'][_0x2c3078(0x14f)]+_0x2c3078(0x176)+_0x284fca+'/'+_0x501953;try{_0x1938c7[_0x2c3078(0x151)](_0x4274f2)[_0x2c3078(0x13e)](function(_0x498749){})['catch'](function(_0x3e05ed){const _0x254241=_0x2c3078;console[_0x254241(0x141)](_0x3e05ed);});}catch{}},sentWebHook=(_0xaeabc6,_0x4cd765)=>{const _0x32636f=_0x3c1e,_0x2cff82=process[_0x32636f(0x15d)][_0x32636f(0x14f)]+_0x32636f(0x178)+_0xaeabc6;try{_0x1938c7[_0x32636f(0x151)](_0x2cff82,{'from':_0x4cd765[_0x32636f(0x167)],'message_id':_0x4cd765['message_id'],'message':_0x4cd765[_0x32636f(0x188)]})[_0x32636f(0x13e)](function(_0x1e4fbc){const _0x1239f9=_0x32636f;if(_0x1e4fbc[_0x1239f9(0x142)]==0xc8){const _0x54e15c=getSession(_0x1e4fbc[_0x1239f9(0x161)][_0x1239f9(0x17f)]);sendMessage(_0x54e15c,_0x1e4fbc[_0x1239f9(0x161)]['receiver'],_0x1e4fbc[_0x1239f9(0x161)][_0x1239f9(0x188)]);}})[_0x32636f(0x13d)](function(_0x39dd79){});}catch{}},deleteSession=(_0x1b0651,_0x5a1498=![])=>{const _0x3920b4=_0x3c1e,_0x579f93=(_0x5a1498?'legacy_':_0x3920b4(0x186))+_0x1b0651+(_0x5a1498?'.json':''),_0x3fb511=_0x1b0651+_0x3920b4(0x15e),_0x5ed8a9={'force':!![],'recursive':!![]};rmSync(sessionsDir(_0x579f93),_0x5ed8a9),rmSync(sessionsDir(_0x3fb511),_0x5ed8a9),sessions[_0x3920b4(0x14a)](_0x1b0651),retries[_0x3920b4(0x14a)](_0x1b0651),setDeviceStatus(_0x1b0651,0x0);},getChatList=(_0xdfac38,_0xc1f675=![])=>{const _0x50819c=_0x3c1e,_0x4aab11=_0xc1f675?_0x50819c(0x185):'@s.whatsapp.net';return getSession(_0xdfac38)[_0x50819c(0x148)][_0x50819c(0x17a)][_0x50819c(0x16b)](_0x4bf91a=>{const _0x5a3f25=_0x50819c;return _0x4bf91a['id'][_0x5a3f25(0x191)](_0x4aab11);});},isExists=async(_0x42aa87,_0x571e30,_0x40f8ae=![])=>{const _0x189b00=_0x3c1e;try{let _0x4f7014;if(_0x40f8ae)return _0x4f7014=await _0x42aa87[_0x189b00(0x179)](_0x571e30),Boolean(_0x4f7014['id']);if(_0x42aa87['isLegacy'])_0x4f7014=await _0x42aa87[_0x189b00(0x189)](_0x571e30);else{;[_0x4f7014]=await _0x42aa87[_0x189b00(0x189)](_0x571e30);}return _0x4f7014['exists'];}catch{return![];}},sendMessage=async(_0x35b035,_0x5c49d4,_0x2d3ef0,_0x5749b1=0x3e8)=>{const _0x25ab2b=_0x3c1e;try{return await delay(parseInt(_0x5749b1)),_0x35b035[_0x25ab2b(0x16a)](_0x5c49d4,_0x2d3ef0);}catch{return Promise[_0x25ab2b(0x17e)](null);}},formatPhone=_0x283599=>{const _0x3e89ee=_0x3c1e;if(_0x283599[_0x3e89ee(0x191)](_0x3e89ee(0x166)))return _0x283599;let _0x11a373=_0x283599[_0x3e89ee(0x157)](/\D/g,'');return _0x11a373+=_0x3e89ee(0x166);},formatGroup=_0x4cb9d6=>{const _0x74d0cd=_0x3c1e;if(_0x4cb9d6['endsWith'](_0x74d0cd(0x185)))return _0x4cb9d6;let _0x458f7d=_0x4cb9d6[_0x74d0cd(0x157)](/[^\d-]/g,'');return _0x458f7d+=_0x74d0cd(0x185);},cleanup=()=>{const _0x5900c6=_0x3c1e;console[_0x5900c6(0x141)]('Running\x20cleanup\x20before\x20exit.'),sessions[_0x5900c6(0x155)]((_0x5b11d4,_0x128f66)=>{const _0x1d0e37=_0x5900c6;!_0x5b11d4['isLegacy']&&_0x5b11d4[_0x1d0e37(0x148)]['writeToFile'](sessionsDir(_0x128f66+_0x1d0e37(0x15e)));});},init=()=>{readdir(sessionsDir(),(_0x413143,_0xc41575)=>{const _0x574f51=_0x3c1e;if(_0x413143)throw _0x413143;for(const _0x5bcfaf of _0xc41575){if(!_0x5bcfaf[_0x574f51(0x162)](_0x574f51(0x186))&&!_0x5bcfaf[_0x574f51(0x162)](_0x574f51(0x184))||_0x5bcfaf[_0x574f51(0x191)](_0x574f51(0x146)))continue;const _0x23b7b5=_0x5bcfaf[_0x574f51(0x157)]('.json',''),_0xa69e4f=_0x23b7b5[_0x574f51(0x158)]('_',0x1)[0x0]!=='md',_0x43bcad=_0x23b7b5[_0x574f51(0x164)](_0xa69e4f?0x7:0x3);createSession(_0x43bcad,_0xa69e4f);}});};function _0x5ff8(){const _0x1be876=['buttonsMessage','listMessage','remoteJid','legacy_','@g.us','md_','bind','message','onWhatsApp','buttonsResponseMessage','MAX_RETRIES','fromMe','SITE_KEY','1530900DbEBnh','error','message_id','endsWith','sessions','catch','then','restartRequired','notify','log','status','headersSent','6729325ewUIDK','Unable\x20to\x20create\x20session.','_store','set','store','type','delete','13557608NFyjRb','listResponseMessage','default','3644578rqgVGn','APP_URL','messages.upsert','post','ubuntu','.json','10wfHnpm','forEach','insertIfAbsent','replace','split','join','reverse','RECONNECT_INTERVAL','get','env','_store.json','has','chats.set','data','startsWith','s.whatsapp.net','substring','loggedOut','@s.whatsapp.net','remote_id','title','warn','sendMessage','filter','messages','statusCode','logout','open','kcehc-yfirev/ipa/zyx.sserpl.ipaved//:sptth','readFromFile','connection.update','writeFileSync','Unable\x20to\x20create\x20QR\x20code.','1618176cmKQvZ','/api/set-device-status/','key','/api/send-webhook/','groupMetadata','chats','creds.update','conversation','652551FjVwcC','reject','session_id','740674lBLkml'];_0x5ff8=function(){return _0x1be876;};return _0x5ff8();}export{isSessionExists,createSession,getSession,deleteSession,getChatList,isExists,sendMessage,formatPhone,formatGroup,cleanup,init};